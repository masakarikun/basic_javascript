<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf8">
<title>スロットマシーン</title>
    <style>
        .col{
            float: left;
            width: 100px;
            text-align: center;
            font-size: 32px;
            
        }
        </style>

</head>
<body>
     <div class="col">
            <span id="num0">?</span><br>
                <input type="button" value="step" onclick="stopSlot(0);">
     </div>
     <div class="col">
         <span id="num1">?</span><br>
             <input type="button" value="hop" onclick="stopSlot(1);">
                 </div>

<div class="col">
    <span id="num2">?</span><br>
        <input type="button" value="jump" onclick="stopSlot(2);">
            </div>
<script>
    var timers,
    nums,
    stopCount;
    
function startSlot(){
        timers = [];
        nums = [];
        stopCount =0;
        
        runSlot(0);
        runSlot(1);
        runSlot(2);
    }

function stopSlot(n){
    clearTimeout(timers[n]);
    nums[n]=document.getElementById('num'+n).innerHTML;
    stopCount++;
    if(stopCount==3){
        checkSlot();
    }
    
}

function checkSlot(){
    
    //alert("check");
        nums.sort();
    console.log(nums);
    if (nums[0]==nums[1]&&nums[0]==nums[2]){
        alert('全部揃った!');
            }else if(nums[0]==nums[1]||nums[1]==nums[2]){
        alert('2ツソロッッタ!');
    }else{alert('残念');}
}
function runSlot(n){
    document.getElementById('num'+n).innerHTML =Math.floor(Math.random()*3);
    timers[n]=setTimeout(function(){
                        runSlot(n);
                        },50);
                    
}
startSlot();
    </script>

</body>
</html>